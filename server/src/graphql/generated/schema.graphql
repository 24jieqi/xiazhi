### This file was generated by Nexus Schema
### Do not make changes to this file directly


"""应用权限&访问相关的信息"""
type AppAccessInfo {
  """应用是否可以访问"""
  access: Boolean

  """应用访问key，重置后失效"""
  accessKey: String
  app_id: Int!

  """是否已经归档（不可以再编辑应用&应用词条）"""
  archived: Boolean

  """是否已经删除"""
  deleted: Boolean
  name: String

  """是否支持进行词条推送"""
  push: Boolean
}

"""应用基本信息"""
type AppItem {
  """是否可访问"""
  access: Boolean

  """可访问key"""
  accessKey: String
  app_id: Int

  """创建者"""
  creator: UserInfo
  creatorId: Int
  description: String

  """当前应用包含的词条数量"""
  entryCount: Int

  """支持的语言"""
  languages: [LanguageTypeEnum]
  name: String

  """应用截图"""
  pictures: [String]

  """是否支持词条推送"""
  push: Boolean
  type: AppTypeEnum
}

"""应用分页对象"""
type AppPaging {
  current: Int!
  pageSize: Int!
  records: [AppItem]
  total: Int!
}

"""应用类型枚举"""
enum AppTypeEnum {
  CONTACT
  EDUCATION
  EFFICIENCY
  FINANCE
  GAME
  MUSIC
  OTHER
  TOOL
}

"""协作信息项"""
type CollaborateInfo {
  app: AppItem
  assignedAt: DateTime!
  collaborator: UserInfo
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""词条基本信息"""
type EntryItem {
  archive: Boolean
  createdAt: DateTime
  deleted: Boolean
  entry_id: Int
  key: String
  langs: JSONObject

  """支持的语言"""
  mainLang: LanguageTypeEnum
  mainLangText: String
  modifyRecords: [RecordItem]
  public: Boolean
  updatedAt: DateTime
}

"""词条分页对象"""
type EntryPaging {
  current: Int!
  pageSize: Int!
  records: [EntryItem]
  total: Int!
}

"""系统使用反馈项"""
type FeedbackItem {
  feedback_id: Int!
  message: String
  result: Boolean!
  user: UserInfo
}

"""用户反馈的分页对象"""
type FeedbackPaging {
  current: Int!
  pageSize: Int!
  records: [FeedbackItem]
  total: Int!
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

"""平台支持的多语言词条选项"""
type LangageTypeOption {
  label: String!
  value: LanguageTypeEnum
}

"""应用支持的语言枚举"""
enum LanguageTypeEnum {
  CHINESE
  ENGLISH
  THAI
  VIETNAMESE
}

type Mutation {
  addLangage(label: String!, value: LanguageTypeEnum!): Int

  """归档一个应用（归档后不能再编辑）"""
  archivedApp(id: Int!): Boolean

  """更改应用在可访问和推送上的状态"""
  changeAccessStatus(access: Boolean, appId: Int!, push: Boolean): Boolean

  """归档词条或者删除词条（仅针对非公共词条）"""
  changeEntryAccessStatus(appId: Int!, archive: Boolean, deleted: Boolean, entryId: Int!): Boolean

  """检测邮箱是否可用"""
  checkEmailValidation(email: String!): Boolean

  """创建应用"""
  createApp(description: String, languages: [LanguageTypeEnum!]!, name: String!, pictures: [String!]!, type: AppTypeEnum!): Int

  """创建词条，默认情况下都为公共词条"""
  createEntry(appId: Int, key: String, langs: JSONObject): Int

  """删除一个应用（逻辑删除），删除后应用对客户不可见"""
  deleteApp(id: Int!): Boolean

  """删除（批量）应用词条"""
  deleteEntries(appId: Int!, entryIds: [Int!]!): Boolean

  """退出协作"""
  existCollaboration(appId: Int!): Boolean

  """反馈(新增/修改描述)"""
  feedback(feedbackId: Int, message: String, result: Boolean!, userId: Int): Int

  """邀请协作者"""
  inviteCollaborators(appId: Int!, userIdList: [Int!]!): Boolean

  """邮箱&密码登录"""
  login(email: String!, password: String!): String

  """刷新应用accessKey"""
  refreshAccessKey(id: Int!): String

  """用户邮箱&密码注册"""
  register(email: String!, password: String!): String

  """移除协作者"""
  removeCollaborators(appId: Int!, userIdList: [Int!]!): Boolean
  resetPassword(password: String!): Boolean

  """发送重设密码链接"""
  sendResetPasswordEmail(email: String!): Boolean

  """发送验证邮件"""
  sendVerifyEmail: Boolean

  """公共词条、私有词条相互转换"""
  transformEntry(entryId: Int!, targetAppId: Int!): Boolean

  """更新应用基本信息"""
  updateAppBasicInfo(appId: Int!, description: String, pictures: [String!]!, type: AppTypeEnum!): Int
  updateEntry(appId: Int, entryId: Int!, isRollback: Boolean!, key: String, langs: JSONObject): Boolean

  """编辑用户信息"""
  updateUserInfo(avatar: String, name: String, nickName: String, phone: String, role: UserRoleEnum): Boolean
  uploadEntries(accessKey: String, entries: [UploadEntryItem]!): Boolean

  """通过excel上传词条"""
  uploadEntriesXlsx(appId: Int!, fileUrl: String!): Boolean

  """邮箱验证"""
  verifyEmail: String
}

type Query {
  """点赞次数统计"""
  countPositive: Int

  """根据应用id获取应用权限&访问相关的信息"""
  getAccessKeyByAppId(id: Int!): AppAccessInfo

  """根据accessKey获取所有应用词条"""
  getAllEntries(accessKey: String!): [EntryItem]

  """获取应用的协作者列表"""
  getAppCollaborators(appId: Int!): [CollaborateInfo]

  """通过应用id获取应用基本信息"""
  getAppInfoById(id: Int!): AppItem

  """获取当前用户创建的应用列表"""
  getCurrentApps(access: Boolean, languages: [LanguageTypeEnum!], name: String, push: Boolean, type: AppTypeEnum): AppPaging

  """获取当前登录用户的基本信息"""
  getCurrentUser: UserInfo

  """根据应用id获取要共享的应用词库"""
  getTransformAppInfoById(entryId: Int!): [TransformAppEntryInfo]
  listSupportLanguage: [LangageTypeOption]

  """用户姓名的模糊查询"""
  listUserFuzzyByUserName(keywords: String!): [UserInfo]

  """获取所有公共词条（分页）"""
  pageAllPublicEntries(pageNo: Int!, pageSize: Int!): EntryPaging

  """获取应用所有词条（分页）"""
  pageAppEntries(appId: Int!, archive: Boolean, endTime: Float, key: String, latest: Boolean, mainLangText: String, pageNo: Int!, pageSize: Int!, startTime: Float): EntryPaging

  """反馈问题内容分页"""
  pageFeedbackNegative(pageNo: Int!, pageSize: Int!): FeedbackPaging

  """词条key应用内唯一校验"""
  validEntryKey(appId: Int, entryId: Int, key: String): Boolean
}

"""词条操作记录"""
type RecordItem {
  createdAt: DateTime
  creator: Int
  creatorInfo: UserInfo
  currKey: String
  currLangs: JSONObject
  entryEntry_id: Int
  prevKey: String
  prevLangs: JSONObject
  record_id: Int!
}

"""词条要转换的应用词库信息"""
type TransformAppEntryInfo {
  label: String
  value: Int
}

"""新增词条上传信息"""
input UploadEntryItem {
  key: String
  langs: JSONObject
}

"""用户基本信息"""
type UserInfo {
  """用户头像"""
  avatar: String

  """邮件"""
  email: String

  """用户账户"""
  name: String

  """昵称"""
  nickName: String
  phone: String

  """角色"""
  role: UserRoleEnum

  """用户id"""
  user_id: Int

  """用户验证方式，为空表示暂未验证"""
  verifyType: String
}

"""用户角色枚举"""
enum UserRoleEnum {
  DEVELOPER
  MANAGER
  OTHER
  TRANSLATOR
}